let errorHandler;typeof ErrorHandler!="undefined"?errorHandler=new ErrorHandler:errorHandler={logError:(e,t,n)=>{(window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1")&&console.error(n?`${n}: ${e}`:e,t)}},document.addEventListener("DOMContentLoaded",()=>{initMobileMenu(),initCanvasHeader(),initWorkspaceClient()});function initMobileMenu(){const t=document.getElementById("mobileMenuToggle"),e=document.getElementById("mobileMenu");t&&e&&(t.addEventListener("click",()=>{e.classList.toggle("open")}),document.addEventListener("click",n=>{!e.contains(n.target)&&!t.contains(n.target)&&e.classList.remove("open")}))}function initCanvasHeader(){const e=window.location.origin;fetch(`${e}/api/installation/info`).then(e=>e.json()).then(e=>{if(e.installation_name){const t=document.getElementById("installationName");t&&(t.textContent=e.installation_name)}}).catch(e=>{errorHandler.logError("Failed to fetch installation info",e,"CanvasHeader")}),fetch(`${e}/api/canvas/info`).then(e=>e.json()).then(e=>{if(e.canvas_name){const t=document.getElementById("canvasName");t&&(t.textContent=e.canvas_name)}}).catch(e=>{errorHandler.logError("Failed to fetch canvas info",e,"CanvasHeader")})}function initWorkspaceClient(){if(typeof WorkspaceClient=="undefined")return;const e=new WorkspaceClient,n=window.location.origin;e.on("connected",()=>{t("connected","Connected")}),e.on("disconnected",()=>{t("disconnected","Disconnected")}),e.on("reconnecting",e=>{t("connecting",`Reconnecting (${e})...`)}),e.on("canvas_update",e=>{if(e.canvas_name){const t=document.getElementById("canvasName");t&&(t.textContent=e.canvas_name)}});function t(e,t){const n=document.getElementById("statusIndicator"),s=document.getElementById("statusText");n&&(n.className=`status-indicator ${e}`),s&&(s.textContent=t)}e.connect(n)}